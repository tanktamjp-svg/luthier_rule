<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luthier: 規則參考與索引</title>
    <style>
        :root {
            --primary-color: #8B4513; /* 馬鞍棕色 */
            --secondary-color: #5D4037;
            --accent-color: #CD853F; /* 秘魯色 */
            --bg-color: #FDF5E6; /* 舊蕾絲色 */
            --text-color: #2F2F2F;
            --paper-texture: #fffef8;
        }

        body {
            font-family: "Noto Serif TC", "PMingLiU", "Garamond", serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            display: flex;
            height: 100vh;
            line-height: 1.6;
        }

        /* 側邊導航欄 */
        nav {
            width: 250px;
            background-color: var(--secondary-color);
            color: #fff;
            overflow-y: auto;
            padding: 20px;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
        }

        nav h2 {
            font-size: 1.2rem;
            border-bottom: 1px solid var(--accent-color);
            padding-bottom: 10px;
            margin-top: 0;
        }

        nav ul {
            list-style: none;
            padding: 0;
        }

        nav a {
            text-decoration: none;
            color: #e0e0e0;
            display: block;
            padding: 8px 0;
            transition: color 0.3s;
        }

        nav a:hover {
            color: var(--accent-color);
        }

        /* 主要內容區域 */
        main {
            flex-grow: 1;
            padding: 40px;
            overflow-y: auto;
            position: relative;
        }

        /* 頁首與搜尋 */
        header {
            margin-bottom: 40px;
            text-align: center;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 20px;
        }

        h1 {
            font-size: 3rem;
            margin: 0;
            color: var(--primary-color);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .search-container {
            margin-top: 20px;
        }

        #searchBar {
            width: 100%;
            max-width: 600px;
            padding: 12px;
            font-size: 1.1rem;
            border: 2px solid var(--primary-color);
            border-radius: 5px;
            background-color: #fff;
            font-family: inherit;
        }

        /* 規則區塊 */
        .rule-section {
            background: var(--paper-texture);
            border: 1px solid #dcdcdc;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .rule-section h2 {
            color: var(--primary-color);
            margin-top: 0;
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
        }

        .rule-section h3 {
            color: var(--secondary-color);
            margin-top: 20px;
        }

        .highlight {
            background-color: #ffeeba;
            padding: 0 4px;
        }

        /* 列表與表格 */
        ul { 
            padding-left: 20px; 
        }
        
        li {
            margin-bottom: 8px;
        }

        /* 動作提示框 */
        .action-box {
            background-color: #fdfbf7;
            border-left: 4px solid var(--accent-color);
            padding: 15px;
            margin: 15px 0;
        }

        .citation {
            font-size: 0.8rem;
            color: #888;
            margin-left: 5px;
        }

        /* 響應式設計 */
        @media (max-width: 768px) {
            body { flex-direction: column; }
            nav { width: 100%; height: auto; padding: 10px; }
            main { padding: 20px; }
        }
    </style>
</head>
<body>

    <nav>
        <h2>索引 (Index)</h2>
        <ul>
            <li><a href="#overview">遊戲概覽 (Overview)</a></li>
            <li><a href="#setup">設置重點 (Setup)</a></li>
            <li><a href="#structure">回合結構 (Structure)</a></li>
            <li><a href="#planning">規劃與工人 (Planning)</a></li>
            <li><a href="#resolution">結算與優先權 (Resolution)</a></li>
            <li><a href="#market">市場 (Market)</a></li>
            <li><a href="#main-board">主版圖地點 (Locations)</a></li>
            <li><a href="#workbench">工作台 (Workbench)</a></li>
            <li><a href="#orchestra">樂團與首席 (Orchestra)</a></li>
            <li><a href="#endgame">遊戲結束計分 (Scoring)</a></li>
        </ul>
    </nav>

    <main>
        <header>
            <h1>Luthier</h1>
            <p>樂器工匠的藝術 - 規則參考</p>
            <div class="search-container">
                <input type="text" id="searchBar" placeholder="搜尋規則 (例如：'首席', '維修', '平手')..." onkeyup="filterRules()">
            </div>
        </header>

        <div id="overview" class="rule-section">
            <h2>遊戲概覽</h2>
            <p>玩家扮演工匠家族，透過滿足贊助人對精緻樂器、演奏和維修的需求來追求聲望。目標是在 6 個回合中獲得最多的<strong>聲望點數 (Prestige Points)</strong>。</p>
            <ul>
                <li><strong>聲望：</strong> 透過製作樂器、滿足贊助人、演奏、維修樂器以及爭奪公共獎勵和首席位置來獲得。</li>
                <li><strong>贊助人耐心：</strong> 只要贊助人還有耐心，他們就會提供禮物。如果被忽視太久導致耐心耗盡，他們會離開並扣除你的家族聲望。</li>
            </ul>
        </div>

        <div id="setup" class="rule-section">
            <h2>設置重點</h2>
            <ul>
                <li><strong>起始玩家：</strong> 由工匠家族板塊上數字最小的玩家開始。</li>
                <li><strong>手牌與上限：</strong> 卡牌沒有手牌上限，但材料儲存區上限為任何類型的材料共 <strong>9 個</strong>。</li>
                <li><strong>起始資源：</strong> 根據所選的工匠家族板塊上印製的內容拿取。</li>
                <li><strong>2人遊戲：</strong> 需要使用特殊的樂團設置卡和覆蓋板塊。</li>
            </ul>
        </div>

        <div id="structure" class="rule-section">
            <h2>回合結構</h2>
            <p>遊戲共進行 6 個回合。每個回合包含以下階段：</p>
            <ol>
                <li><strong>回合開始 (Start of Round)：</strong> 
                    <ul>
                        <li>推進所有活躍贊助人的耐心方塊並獲得禮物。</li>
                        <li>從手牌中放置最多 2 張樂器卡到「粗製台 (Roughing Bench)」。</li>
                    </ul>
                </li>
                <li><strong>規劃階段 (Planning Phase)：</strong> 玩家輪流將工人放置在地點上。</li>
                <li><strong>結算階段 (Resolution Phase)：</strong> 逐一啟動地點並結算行動。</li>
                <li><strong>回合結束 (End of Round)：</strong> 更新順位、刷新市場與卡牌、推進回合標記。</li>
            </ol>
        </div>

        <div id="planning" class="rule-section">
            <h2>規劃與工人放置</h2>
            <p><strong>放置：</strong> 依照回合順位，每位玩家輪流將正好一個工人指示物（面朝下）放置在一個地點上。</p>
            <ul>
                <li><strong>學徒 (Apprentices)：</strong> 你可以在工人身上疊加最多 3 個學徒，每個學徒可使該地點的結算技能 +1。</li>
                <li><strong>堆疊：</strong> 你可以放置在現有的指示物上方。同一地點允許放置多個自己的工人。</li>
                <li><strong>工人編號：</strong> 遊戲開始時擁有工人 #1, #3, #5。第 3 回合解鎖 #2，第 5 回合解鎖 #4。</li>
            </ul>
        </div>

        <div id="resolution" class="rule-section">
            <h2>結算與優先順序</h2>
            <p>地點會逐一啟動。當一個地點啟動時，翻開所有指示物。行動依照<strong>優先順序 (Priority Order)</strong> 執行：</p>
            <ol>
                <li><strong>最高技能：</strong> 工人數字 + 學徒數量。</li>
                <li><strong>平手判定：</strong> 先放置的工人優先執行。</li>
            </ol>
            <div class="action-box">
                <strong>替代行動：</strong> 在任何地點（包含主版圖或工作台），玩家總是能選擇拿取 <strong>$2</strong> 來取代該地點的列表行動。
            </div>
        </div>

        <div id="market" class="rule-section">
            <h2>市場 (The Market)</h2>
            <p>這是結算階段中，輪到你的回合時可執行的「自由行動」（每回合限一次）。不需要使用工人。</p>
            <ul>
                <li><strong>買/賣：</strong> 動物材料、木材、金屬。價格依據當前市場卡波動。同一回合內不能對同一種材料既買又賣。</li>
                <li><strong>雇用學徒：</strong> 每個 $4。</li>
                <li><strong>培訓：</strong> 推進演奏軌或工藝軌。每推進一格花費 $15。</li>
                <li><strong>靈感折扣：</strong> 花費 1 個靈感標記可使物品/行動成本減少 $1（1:1 比例）。</li>
            </ul>
        </div>

        <div id="main-board" class="rule-section">
            <h2>主版圖地點</h2>
            
            <h3>1. 沙龍 (Salon) - 贊助人</h3>
            <ul>
                <li><strong>主要行動：</strong> 拿取一張面朝上的贊助人卡並放置在個人版圖上（最多 3 位活躍贊助人）。立即獲得放置獎勵。</li>
                <li><strong>替代行動：</strong> 從市場拿取 2 個靈感和 1 個學徒。</li>
                <li><strong>4+ 技能獎勵：</strong> 將一個耐性方塊向左移一格，並獲得該贊助人提供的任一禮物。</li>
            </ul>

            <h3>2. 公會 (Guild) - 樂器圖紙</h3>
            <ul>
                <li><strong>主要行動：</strong> 拿取一張面朝上的樂器卡入手。</li>
                <li><strong>替代行動：</strong> 拿取 1 個金屬材料。</li>
                <li><strong>4+ 技能獎勵：</strong> 拿取 1 個任意材料，並可立即從手中放置 1 張樂器圖紙到粗製台。</li>
            </ul>

            <h3>3. 演奏 (Perform)</h3>
            <ul>
                <li><strong>主要行動：</strong> 選擇演奏卡。擲骰 + 工人技能。獲得金錢/聲望。若獲得中等/高等成果，在樂團放置演奏標記。</li>
                <li><strong>替代行動：</strong> 拿取 3 個動物材料。</li>
                <li><strong>4+ 技能獎勵：</strong> 在演奏技能軌 (Performance Skill Track) 上推進一格。</li>
                <li><strong>靈感：</strong> 擲骰後可花費靈感來增加結果（每個標記 +1）。</li>
            </ul>

            <h3>4. 維修 (Repair)</h3>
            <ul>
                <li><strong>主要行動：</strong> 支付維修卡上列出的材料。獲得聲望。在樂團放置維修標記。</li>
                <li><strong>替代行動：</strong> 拿取 2 個木材。</li>
                <li><strong>4+ 技能獎勵：</strong> 在工藝技能軌 (Craft Skill Track) 上推進一格。</li>
                <li><strong>靈感：</strong> 花費 2 個靈感可抵用 1 個維修所需材料。</li>
            </ul>

            <h3>5. 露台 (Balcony)</h3>
            <ul>
                <li><strong>主要行動：</strong> 領取一個已達成條件的公共獎勵。</li>
                <li><strong>替代行動：</strong> 拿取 $6 或 從市場拿取 2 個學徒。</li>
                <li><strong>4+ 技能獎勵：</strong> 在聲望軌 (Reputation Track) 上推進一格。</li>
                <li><strong>順位變更：</strong> 此處的工人將決定下一回合的玩家順位。</li>
            </ul>
        </div>

        <div id="workbench" class="rule-section">
            <h2>工作台 (The Workbench)</h2>
            <p>只有擁有者能在這裡放置工人。若解鎖技能，可一次結算多個工人或執行雙倍行動。</p>
            
            <h3>粗製台 (Roughing Bench - 左側)</h3>
            <ul>
                <li><strong>行動：</strong> 支付粗製成本。將卡牌移至精製台。</li>
                <li><strong>3+ 技能獎勵：</strong> 獲得 2 個靈感。</li>
                <li><strong>5+ 技能獎勵：</strong> 本次行動減少 1 個材料需求。</li>
            </ul>

            <h3>精製台 (Finishing Bench - 右側)</h3>
            <ul>
                <li><strong>行動：</strong> 支付精製成本。獲得聲望。在樂團放置樂器標記。</li>
                <li><strong>贊助人：</strong> 你可以將完成的樂器交給贊助人以滿足需求（重置耐心）。</li>
                <li><strong>4+ 技能獎勵：</strong> 本次行動減少 1 個材料需求。</li>
                <li><strong>6+ 技能獎勵：</strong> 樂團放置獎勵雙倍。</li>
            </ul>
        </div>

        <div id="orchestra" class="rule-section">
            <h2>樂團與首席 (The Orchestra & First Chair)</h2>
            <p>標記透過演奏、維修或完成樂器放置於此。</p>
            
            <h3>首席規則 (First Chair Rules)</h3>
            <p>「首席」是該區域最上面的位置。只有一個標記能佔據它（稀有樂器除外）。</p>
            <ul>
                <li><strong>空位：</strong> 放置標記，領取獎勵。</li>
                <li><strong>樂器標記：</strong> 總是能搶走「演奏」或「維修」標記的首席位置。將原標記移至「線下」。</li>
                <li><strong>演奏/維修標記：</strong> 只有當你在該區域擁有的標記數量<em>多於</em>當前首席持有者時，才能搶走首席。</li>
                <li><strong>線下 (Below the Line)：</strong> 如果你無法搶到首席，將標記放在線下並獲得 <strong>$2 或 1 個靈感</strong>。</li>
            </ul>
        </div>

        <div id="endgame" class="rule-section">
            <h2>遊戲結束計分</h2>
            <p>第 6 回合結束後遊戲結束。將以下分數加到當前聲望中：</p>
            <ol>
                <li><strong>首席位置：</strong> 根據佔據的席位總數計分（例如：1 個席位 = 4分，6 個席位 = 139分）。</li>
                <li><strong>贊助人 (B) 能力：</strong> 根據卡牌文字獲得變動分數。</li>
                <li><strong>未完成樂器：</strong> 精製台上的樂器獲得一半聲望分（無條件進位）。</li>
                <li><strong>個人目標：</strong> 獲得已達成的最高等級分數。</li>
                <li><strong>特殊工人：</strong> 每張卡 1 分。</li>
                <li><strong>剩餘資源：</strong> 每 10 個總價值（錢+材料+靈感+學徒）獲得 1 分。剩餘金錢作為平手決勝依據。</li>
            </ol>
        </div>

    </main>

    <script>
        function filterRules() {
            var input, filter, main, sections, p, i, txtValue;
            input = document.getElementById('searchBar');
            filter = input.value.toUpperCase();
            main = document.querySelector("main");
            sections = main.getElementsByClassName('rule-section');

            for (i = 0; i < sections.length; i++) {
                txtValue = sections[i].textContent || sections[i].innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    sections[i].style.display = "";
                } else {
                    sections[i].style.display = "none";
                }
            }
        }
    </script>
</body>
</html>
